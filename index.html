<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>Gawat!!!! - User Interface</title>
    <link rel="stylesheet" href="style.css">
    <style>
        :root { --timsar: #ff8c00; }
    </style>
</head>
<body>
    <div class="user-float">
        <div style="background: rgba(128, 0, 0, 0.8); padding: 25px; text-align: center;">
            <h1 style="margin:0; font-family: 'Orbitron'; letter-spacing:2px;">ğŸš¨ GAWAT!!!!</h1>
            <p style="font-size:11px; margin-top:5px; opacity:0.8;">TEKAN TOMBOL UNTUK BANTUAN INSTAN</p>
        </div>

        <div style="padding: 25px;">
            <label style="font-size: 12px; opacity: 0.7;">Nama Pelapor:</label>
            <input type="text" id="nama-pelapor" placeholder="Masukkan nama Anda..." 
                   style="width:100%; padding:12px; margin:10px 0 15px 0; border-radius:10px; border:1px solid rgba(255,255,255,0.2); background:rgba(255,255,255,0.05); color:white; box-sizing: border-box; outline:none;">

            <label style="font-size: 12px; opacity: 0.7;">Tingkat Darurat:</label>
            <select id="prioritas" style="width:100%; padding:12px; margin:10px 0 15px 0; border-radius:10px; border:1px solid rgba(255,255,255,0.2); background:#222; color:white; outline:none;">
                <option value="Normal">ğŸŸ¢ Normal (Butuh Bantuan)</option>
                <option value="Tinggi">ğŸ”´ KRITIS (Nyawa Terancam!)</option>
            </select>

            <label style="font-size: 12px; opacity: 0.7;">Detail Kejadian:</label>
            <textarea id="detail-kejadian" placeholder="Ceritakan singkat kejadiannya..." 
                      style="width:100%; padding:12px; margin:10px 0 20px 0; border-radius:10px; border:1px solid rgba(255,255,255,0.2); background:rgba(255,255,255,0.05); color:white; box-sizing: border-box; outline:none; height: 80px; resize: none; font-family: 'Poppins', sans-serif;"></textarea>

            <div style="display: grid; gap: 15px;">
                <button onclick="kirimKeAdmin('Ambulance', 'ğŸš‘')" class="btn-sos" style="background:var(--maroon); box-shadow: 0 0 15px var(--maroon);">ğŸš‘ AMBULANCE (MEDIS)</button>
                <button onclick="kirimKeAdmin('Damkar', 'ğŸ”¥')" class="btn-sos" style="background:var(--orange); box-shadow: 0 0 15px var(--orange);">ğŸ”¥ DAMKAR (KEBAKARAN)</button>
                <button onclick="kirimKeAdmin('Polisi', 'ğŸš”')" class="btn-sos" style="background:var(--navy); box-shadow: 0 0 15px var(--navy);">ğŸš” POLISI (KRIMINAL)</button>
                <button onclick="kirimKeAdmin('Timsar', 'ğŸš')" class="btn-sos" style="background:var(--timsar); box-shadow: 0 0 15px var(--timsar);">ğŸš TIMSAR (PENYELAMATAN)</button>
            </div>
        </div>
        <p style="text-align:center; padding-bottom:20px; font-size:9px; opacity:0.5; letter-spacing:1px;">GPS AKTIF - REAL TIME TRACKING</p>
    </div>

    <script>
        function kirimKeAdmin(kategori, ikon) {
            const nama = document.getElementById('nama-pelapor').value;
            const detail = document.getElementById('detail-kejadian').value; 
            const prioritas = document.getElementById('prioritas').value;
            
            if(!nama || !detail) {
                alert("Lengkapi nama dan detail kejadian!");
                return;
            }

            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(pos => {
                    const dataFinal = {
                        nama: nama,
                        detail: detail, 
                        prioritas: prioritas,
                        kategori: kategori,
                        pesan: `${ikon} UNIT ${kategori.toUpperCase()} DIBUTUHKAN SEGERA!`,
                        lat: pos.coords.latitude,
                        lng: pos.coords.longitude,
                        waktu: new Date().toLocaleTimeString()
                    };
                    
                    let list = JSON.parse(localStorage.getItem('laporan_gawat')) || [];
                    list.push(dataFinal);
                    localStorage.setItem('laporan_gawat', JSON.stringify(list));
                    
                    alert(`âš ï¸ ALARM ${kategori.toUpperCase()} TERKIRIM!`);
                    document.getElementById('nama-pelapor').value = "";
                    document.getElementById('detail-kejadian').value = "";
                }, () => alert("Pastikan GPS aktif!"));
            }
        }
    </script>
</body>
</html>