<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>Gawat!!!! - User Interface</title>
    <link rel="stylesheet" href="style.css">
    <style>
        :root { --timsar: #ff8c00; }

        /* Animasi Berdenyut untuk Tombol SOS */
        @keyframes pulse-sos {
            0% { transform: scale(1); box-shadow: 0 0 0px #ff0000; }
            50% { transform: scale(1.05); box-shadow: 0 0 30px #ff0000; }
            100% { transform: scale(1); box-shadow: 0 0 0px #ff0000; }
        }

        .sos-container {
            padding: 20px;
            text-align: center;
            background: rgba(255, 0, 0, 0.1);
            border-bottom: 1px solid rgba(255, 0, 0, 0.3);
        }

        .btn-panic {
            background: linear-gradient(45deg, #ff0000, #800000);
            border: 3px solid #ffffff;
            width: 100px;
            height: 100px;
            border-radius: 50%;
            color: white;
            font-family: 'Orbitron';
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            animation: pulse-sos 1s infinite;
            transition: 0.3s;
        }

        .btn-panic:active {
            transform: scale(0.9);
        }
    </style>
</head>
<body>
    <div class="user-float">
        <div style="background: rgba(128, 0, 0, 0.8); padding: 25px; text-align: center;">
            <h1 style="margin:0; font-family: 'Orbitron'; letter-spacing:2px;">üö® GAWAT!!!!</h1>
            <p style="font-size:11px; margin-top:5px; opacity:0.8;">TEKAN TOMBOL UNTUK BANTUAN INSTAN</p>
        </div>

        <div class="sos-container">
            <button onclick="sendSOS()" class="btn-panic">SOS</button>
            <p style="color: #ff4444; font-family: 'Orbitron'; font-size: 9px; margin-top: 10px; letter-spacing: 1px;">
                EMERGENCY ONLY
            </p>
        </div>

        <div style="padding: 25px;">
            <label style="font-size: 12px; opacity: 0.7;">Nama Pelapor:</label>
            <input type="text" id="nama-pelapor" placeholder="Masukkan nama Anda..." 
                   style="width:100%; padding:12px; margin:10px 0 15px 0; border-radius:10px; border:1px solid rgba(255,255,255,0.2); background:rgba(255,255,255,0.05); color:white; box-sizing: border-box; outline:none;">

            <label style="font-size: 12px; opacity: 0.7;">Tingkat Darurat:</label>
            <select id="prioritas" style="width:100%; padding:12px; margin:10px 0 15px 0; border-radius:10px; border:1px solid rgba(255,255,255,0.2); background:#222; color:white; outline:none;">
                <option value="Normal">üü¢ Normal (Butuh Bantuan)</option>
                <option value="Tinggi">üî¥ KRITIS (Nyawa Terancam!)</option>
            </select>

            <label style="font-size: 12px; opacity: 0.7;">Detail Kejadian:</label>
            <textarea id="detail-kejadian" placeholder="Ceritakan singkat kejadiannya..." 
                      style="width:100%; padding:12px; margin:10px 0 20px 0; border-radius:10px; border:1px solid rgba(255,255,255,0.2); background:rgba(255,255,255,0.05); color:white; box-sizing: border-box; outline:none; height: 80px; resize: none; font-family: 'Poppins', sans-serif;"></textarea>

            <div style="display: grid; gap: 15px;">
                <button onclick="kirimKeAdmin('Ambulance', 'üöë')" class="btn-sos" style="background:var(--maroon); box-shadow: 0 0 15px var(--maroon);">üöë AMBULANCE (MEDIS)</button>
                <button onclick="kirimKeAdmin('Damkar', 'üî•')" class="btn-sos" style="background:var(--orange); box-shadow: 0 0 15px var(--orange);">üî• DAMKAR (KEBAKARAN)</button>
                <button onclick="kirimKeAdmin('Polisi', 'üöî')" class="btn-sos" style="background:var(--navy); box-shadow: 0 0 15px var(--navy);">üöî POLISI (KRIMINAL)</button>
                <button onclick="kirimKeAdmin('Timsar', 'üöÅ')" class="btn-sos" style="background:var(--timsar); box-shadow: 0 0 15px var(--timsar);">üöÅ TIMSAR (PENYELAMATAN)</button>
            </div>
        </div>
        <p style="text-align:center; padding-bottom:20px; font-size:9px; opacity:0.5; letter-spacing:1px;">GPS AKTIF - REAL TIME TRACKING</p>
        
        <a href="admin.html" style="display:block; text-align:center; padding-bottom:10px; color:rgba(255,255,255,0.1); text-decoration:none; font-size:8px;">OFFICER LOGIN</a>
    </div>

    <script>
        // FUNGSI SOS (TANPA FORM)
        function sendSOS() {
            if (confirm("KIRIM SINYAL SOS SEKARANG? Petugas akan segera melacak lokasi Anda!")) {
                if (navigator.geolocation) {
                    navigator.geolocation.getCurrentPosition(pos => {
                        const dataSOS = {
                            nama: "‚ö†Ô∏è SOS USER",
                            detail: "PANGGILAN DARURAT SOS! BUTUH BANTUAN SEGERA!", 
                            prioritas: "Tinggi",
                            kategori: "Ambulance", 
                            lat: pos.coords.latitude,
                            lng: pos.coords.longitude,
                            waktu: new Date().toLocaleTimeString()
                        };
                        
                        let list = JSON.parse(localStorage.getItem('laporan_gawat')) || [];
                        list.push(dataSOS);
                        localStorage.setItem('laporan_gawat', JSON.stringify(list));
                        
                        alert("üö® SINYAL SOS TERKIRIM! Tetap di posisi Anda.");
                    }, () => alert("Gagal melacak lokasi. Pastikan GPS aktif!"));
                }
            }
        }

        // FUNGSI FORMULIR BIASA
        function kirimKeAdmin(kategori, ikon) {
            const nama = document.getElementById('nama-pelapor').value;
            const detail = document.getElementById('detail-kejadian').value; 
            const prioritas = document.getElementById('prioritas').value;
            
            if(!nama || !detail) {
                alert("Lengkapi nama dan detail kejadian!");
                return;
            }

            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(pos => {
                    const dataFinal = {
                        nama: nama,
                        detail: detail, 
                        prioritas: prioritas,
                        kategori: kategori,
                        lat: pos.coords.latitude,
                        lng: pos.coords.longitude,
                        waktu: new Date().toLocaleTimeString()
                    };
                    
                    let list = JSON.parse(localStorage.getItem('laporan_gawat')) || [];
                    list.push(dataFinal);
                    localStorage.setItem('laporan_gawat', JSON.stringify(list));
                    
                    alert(`‚ö†Ô∏è ALARM ${kategori.toUpperCase()} TERKIRIM!`);
                    document.getElementById('nama-pelapor').value = "";
                    document.getElementById('detail-kejadian').value = "";
                }, () => alert("Pastikan GPS aktif!"));
            }
        }
    </script>
</body>
</html>
